'use strict';

var _get = require('babel-runtime/helpers/get')['default'];

var _inherits = require('babel-runtime/helpers/inherits')['default'];

var _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];

var _createClass = require('babel-runtime/helpers/create-class')['default'];

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _es6Error = require('es6-error');

var _es6Error2 = _interopRequireDefault(_es6Error);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _appiumSupport = require('appium-support');

var _httpStatusCodes = require('http-status-codes');

var _httpStatusCodes2 = _interopRequireDefault(_httpStatusCodes);

// base error class for all of our errors

var MJSONWPError = (function (_ES6Error) {
  _inherits(MJSONWPError, _ES6Error);

  function MJSONWPError(msg, jsonwpCode) {
    var w3cStatus = arguments.length <= 2 || arguments[2] === undefined ? 400 : arguments[2];

    _classCallCheck(this, MJSONWPError);

    _get(Object.getPrototypeOf(MJSONWPError.prototype), 'constructor', this).call(this, msg);
    this.jsonwpCode = jsonwpCode;
    if (this.jsonwpCode === null) {
      this.jsonwpCode = 13;
    }
    this.w3cStatus = w3cStatus;
  }

  return MJSONWPError;
})(_es6Error2['default']);

var NoSuchDriverError = (function (_MJSONWPError) {
  _inherits(NoSuchDriverError, _MJSONWPError);

  _createClass(NoSuchDriverError, null, [{
    key: 'code',
    value: function code() {
      return 6;
    }

    // W3C Error is called InvalidSessionID
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].NOT_FOUND;
    }
  }]);

  function NoSuchDriverError(err) {
    _classCallCheck(this, NoSuchDriverError);

    _get(Object.getPrototypeOf(NoSuchDriverError.prototype), 'constructor', this).call(this, err || 'A session is either terminated or not started', NoSuchDriverError.code(), NoSuchDriverError.w3cStatus());
  }

  return NoSuchDriverError;
})(MJSONWPError);

var NoSuchElementError = (function (_MJSONWPError2) {
  _inherits(NoSuchElementError, _MJSONWPError2);

  _createClass(NoSuchElementError, null, [{
    key: 'code',
    value: function code() {
      return 7;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].NOT_FOUND;
    }
  }]);

  function NoSuchElementError(err) {
    _classCallCheck(this, NoSuchElementError);

    _get(Object.getPrototypeOf(NoSuchElementError.prototype), 'constructor', this).call(this, err || 'An element could not be located on the page using the given ' + 'search parameters.', NoSuchElementError.code(), NoSuchElementError.w3cStatus());
  }

  return NoSuchElementError;
})(MJSONWPError);

var NoSuchFrameError = (function (_MJSONWPError3) {
  _inherits(NoSuchFrameError, _MJSONWPError3);

  _createClass(NoSuchFrameError, null, [{
    key: 'code',
    value: function code() {
      return 8;
    }
  }]);

  function NoSuchFrameError(err) {
    _classCallCheck(this, NoSuchFrameError);

    _get(Object.getPrototypeOf(NoSuchFrameError.prototype), 'constructor', this).call(this, err || 'A request to switch to a frame could not be satisfied because ' + 'the frame could not be found.', NoSuchFrameError.code());
  }

  return NoSuchFrameError;
})(MJSONWPError);

var UnknownCommandError = (function (_MJSONWPError4) {
  _inherits(UnknownCommandError, _MJSONWPError4);

  _createClass(UnknownCommandError, null, [{
    key: 'code',
    value: function code() {
      return 9;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].NOT_FOUND;
    }
  }]);

  function UnknownCommandError(err) {
    _classCallCheck(this, UnknownCommandError);

    _get(Object.getPrototypeOf(UnknownCommandError.prototype), 'constructor', this).call(this, err || 'The requested resource could not be found, or a request was ' + 'received using an HTTP method that is not supported by the mapped ' + 'resource.', UnknownCommandError.code(), UnknownCommandError.w3cStatus());
  }

  return UnknownCommandError;
})(MJSONWPError);

var StaleElementReferenceError = (function (_MJSONWPError5) {
  _inherits(StaleElementReferenceError, _MJSONWPError5);

  _createClass(StaleElementReferenceError, null, [{
    key: 'code',
    value: function code() {
      return 10;
    }
  }]);

  function StaleElementReferenceError(err) {
    _classCallCheck(this, StaleElementReferenceError);

    _get(Object.getPrototypeOf(StaleElementReferenceError.prototype), 'constructor', this).call(this, err || 'An element command failed because the referenced element is no ' + 'longer attached to the DOM.', StaleElementReferenceError.code());
  }

  return StaleElementReferenceError;
})(MJSONWPError);

var ElementNotVisibleError = (function (_MJSONWPError6) {
  _inherits(ElementNotVisibleError, _MJSONWPError6);

  _createClass(ElementNotVisibleError, null, [{
    key: 'code',
    value: function code() {
      return 11;
    }
  }]);

  function ElementNotVisibleError(err) {
    _classCallCheck(this, ElementNotVisibleError);

    _get(Object.getPrototypeOf(ElementNotVisibleError.prototype), 'constructor', this).call(this, err || 'An element command could not be completed because the element is ' + 'not visible on the page.', ElementNotVisibleError.code());
  }

  return ElementNotVisibleError;
})(MJSONWPError);

var InvalidElementStateError = (function (_MJSONWPError7) {
  _inherits(InvalidElementStateError, _MJSONWPError7);

  _createClass(InvalidElementStateError, null, [{
    key: 'code',
    value: function code() {
      return 12;
    }
  }]);

  function InvalidElementStateError(err) {
    _classCallCheck(this, InvalidElementStateError);

    _get(Object.getPrototypeOf(InvalidElementStateError.prototype), 'constructor', this).call(this, err || 'An element command could not be completed because the element is ' + 'in an invalid state (e.g. attempting to click a disabled element).', InvalidElementStateError.code());
  }

  return InvalidElementStateError;
})(MJSONWPError);

var UnknownError = (function (_MJSONWPError8) {
  _inherits(UnknownError, _MJSONWPError8);

  _createClass(UnknownError, null, [{
    key: 'code',
    value: function code() {
      return 13;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].INTERNAL_SERVER_ERROR;
    }
  }]);

  function UnknownError(originalError) {
    _classCallCheck(this, UnknownError);

    var origMessage = originalError;
    if (originalError instanceof Error) {
      origMessage = originalError.message;
    }
    var message = 'An unknown server-side error occurred while processing ' + 'the command.';
    if (originalError) {
      message = message + ' Original error: ' + origMessage;
    }

    _get(Object.getPrototypeOf(UnknownError.prototype), 'constructor', this).call(this, message, UnknownError.code(), UnknownError.w3cStatus());
  }

  return UnknownError;
})(MJSONWPError);

var UnknownMethodError = (function (_MJSONWPError9) {
  _inherits(UnknownMethodError, _MJSONWPError9);

  _createClass(UnknownMethodError, null, [{
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].METHOD_NOT_ALLOWED;
    }
  }]);

  function UnknownMethodError(err) {
    _classCallCheck(this, UnknownMethodError);

    _get(Object.getPrototypeOf(UnknownMethodError.prototype), 'constructor', this).call(this, err || 'Unknown method.', null, UnknownMethodError.w3cStatus());
  }

  return UnknownMethodError;
})(MJSONWPError);

var UnsupportedOperationError = (function (_MJSONWPError10) {
  _inherits(UnsupportedOperationError, _MJSONWPError10);

  _createClass(UnsupportedOperationError, null, [{
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].INTERNAL_SERVER_ERROR;
    }
  }]);

  function UnsupportedOperationError(err) {
    _classCallCheck(this, UnsupportedOperationError);

    _get(Object.getPrototypeOf(UnsupportedOperationError.prototype), 'constructor', this).call(this, err || 'A server-side error occurred. Command cannot be supported.', null, UnsupportedOperationError.w3cStatus());
  }

  return UnsupportedOperationError;
})(MJSONWPError);

var ElementIsNotSelectableError = (function (_MJSONWPError11) {
  _inherits(ElementIsNotSelectableError, _MJSONWPError11);

  _createClass(ElementIsNotSelectableError, null, [{
    key: 'code',
    value: function code() {
      return 15;
    }
  }]);

  function ElementIsNotSelectableError(err) {
    _classCallCheck(this, ElementIsNotSelectableError);

    _get(Object.getPrototypeOf(ElementIsNotSelectableError.prototype), 'constructor', this).call(this, err || 'An attempt was made to select an element that cannot be selected.', ElementIsNotSelectableError.code());
  }

  return ElementIsNotSelectableError;
})(MJSONWPError);

var JavaScriptError = (function (_MJSONWPError12) {
  _inherits(JavaScriptError, _MJSONWPError12);

  _createClass(JavaScriptError, null, [{
    key: 'code',
    value: function code() {
      return 17;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return 500;
    }
  }]);

  function JavaScriptError(err) {
    _classCallCheck(this, JavaScriptError);

    _get(Object.getPrototypeOf(JavaScriptError.prototype), 'constructor', this).call(this, err || 'An error occurred while executing user supplied JavaScript.', JavaScriptError.code(), JavaScriptError.w3cStatus());
  }

  return JavaScriptError;
})(MJSONWPError);

var XPathLookupError = (function (_MJSONWPError13) {
  _inherits(XPathLookupError, _MJSONWPError13);

  _createClass(XPathLookupError, null, [{
    key: 'code',
    value: function code() {
      return 19;
    }
  }]);

  function XPathLookupError(err) {
    _classCallCheck(this, XPathLookupError);

    _get(Object.getPrototypeOf(XPathLookupError.prototype), 'constructor', this).call(this, err || 'An error occurred while searching for an element by XPath.', XPathLookupError.code());
  }

  return XPathLookupError;
})(MJSONWPError);

var TimeoutError = (function (_MJSONWPError14) {
  _inherits(TimeoutError, _MJSONWPError14);

  _createClass(TimeoutError, null, [{
    key: 'code',
    value: function code() {
      return 21;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].REQUEST_TIMEOUT;
    }
  }]);

  function TimeoutError(err) {
    _classCallCheck(this, TimeoutError);

    _get(Object.getPrototypeOf(TimeoutError.prototype), 'constructor', this).call(this, err || 'An operation did not complete before its timeout expired.', TimeoutError.code(), TimeoutError.w3cStatus());
  }

  return TimeoutError;
})(MJSONWPError);

var NoSuchWindowError = (function (_MJSONWPError15) {
  _inherits(NoSuchWindowError, _MJSONWPError15);

  _createClass(NoSuchWindowError, null, [{
    key: 'code',
    value: function code() {
      return 23;
    }
  }]);

  function NoSuchWindowError(err) {
    _classCallCheck(this, NoSuchWindowError);

    _get(Object.getPrototypeOf(NoSuchWindowError.prototype), 'constructor', this).call(this, err || 'A request to switch to a different window could not be satisfied ' + 'because the window could not be found.', NoSuchWindowError.code());
  }

  return NoSuchWindowError;
})(MJSONWPError);

var InvalidArgumentError = (function (_MJSONWPError16) {
  _inherits(InvalidArgumentError, _MJSONWPError16);

  function InvalidArgumentError(err) {
    _classCallCheck(this, InvalidArgumentError);

    _get(Object.getPrototypeOf(InvalidArgumentError.prototype), 'constructor', this).call(this, err || 'The arguments passed to the command are either invalid or malformed');
  }

  return InvalidArgumentError;
})(MJSONWPError);

var InvalidCookieDomainError = (function (_MJSONWPError17) {
  _inherits(InvalidCookieDomainError, _MJSONWPError17);

  _createClass(InvalidCookieDomainError, null, [{
    key: 'code',
    value: function code() {
      return 24;
    }
  }]);

  function InvalidCookieDomainError(err) {
    _classCallCheck(this, InvalidCookieDomainError);

    _get(Object.getPrototypeOf(InvalidCookieDomainError.prototype), 'constructor', this).call(this, err || 'An illegal attempt was made to set a cookie under a different ' + 'domain than the current page.', InvalidCookieDomainError.code());
  }

  return InvalidCookieDomainError;
})(MJSONWPError);

var NoSuchCookieError = (function (_MJSONWPError18) {
  _inherits(NoSuchCookieError, _MJSONWPError18);

  _createClass(NoSuchCookieError, null, [{
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].NOT_FOUND;
    }
  }]);

  function NoSuchCookieError(err) {
    _classCallCheck(this, NoSuchCookieError);

    _get(Object.getPrototypeOf(NoSuchCookieError.prototype), 'constructor', this).call(this, err || 'Could not find cookie', null, NoSuchCookieError.w3cStatus());
  }

  return NoSuchCookieError;
})(MJSONWPError);

var UnableToSetCookieError = (function (_MJSONWPError19) {
  _inherits(UnableToSetCookieError, _MJSONWPError19);

  _createClass(UnableToSetCookieError, null, [{
    key: 'code',
    value: function code() {
      return 25;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].INTERNAL_SERVER_ERROR;
    }
  }]);

  function UnableToSetCookieError(err) {
    _classCallCheck(this, UnableToSetCookieError);

    _get(Object.getPrototypeOf(UnableToSetCookieError.prototype), 'constructor', this).call(this, err || 'A request to set a cookie\'s value could not be satisfied.', UnableToSetCookieError.code(), UnableToSetCookieError.w3cStatus());
  }

  return UnableToSetCookieError;
})(MJSONWPError);

var UnexpectedAlertOpenError = (function (_MJSONWPError20) {
  _inherits(UnexpectedAlertOpenError, _MJSONWPError20);

  _createClass(UnexpectedAlertOpenError, null, [{
    key: 'code',
    value: function code() {
      return 26;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].INTERNAL_SERVER_ERROR;
    }
  }]);

  function UnexpectedAlertOpenError(err) {
    _classCallCheck(this, UnexpectedAlertOpenError);

    _get(Object.getPrototypeOf(UnexpectedAlertOpenError.prototype), 'constructor', this).call(this, err || 'A modal dialog was open, blocking this operation', UnexpectedAlertOpenError.code(), UnexpectedAlertOpenError.w3cStatus());
  }

  return UnexpectedAlertOpenError;
})(MJSONWPError);

var NoAlertOpenError = (function (_MJSONWPError21) {
  _inherits(NoAlertOpenError, _MJSONWPError21);

  _createClass(NoAlertOpenError, null, [{
    key: 'code',
    value: function code() {
      return 27;
    }
  }]);

  function NoAlertOpenError(err) {
    _classCallCheck(this, NoAlertOpenError);

    _get(Object.getPrototypeOf(NoAlertOpenError.prototype), 'constructor', this).call(this, err || 'An attempt was made to operate on a modal dialog when one ' + 'was not open.', NoAlertOpenError.code());
  }

  return NoAlertOpenError;
})(MJSONWPError);

var ScriptTimeoutError = (function (_MJSONWPError22) {
  _inherits(ScriptTimeoutError, _MJSONWPError22);

  _createClass(ScriptTimeoutError, null, [{
    key: 'code',
    value: function code() {
      return 28;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].REQUEST_TIMEOUT;
    }
  }]);

  function ScriptTimeoutError(err) {
    _classCallCheck(this, ScriptTimeoutError);

    _get(Object.getPrototypeOf(ScriptTimeoutError.prototype), 'constructor', this).call(this, err || 'A script did not complete before its timeout expired.', ScriptTimeoutError.code(), ScriptTimeoutError.w3cStatus());
  }

  return ScriptTimeoutError;
})(MJSONWPError);

var InvalidElementCoordinatesError = (function (_MJSONWPError23) {
  _inherits(InvalidElementCoordinatesError, _MJSONWPError23);

  _createClass(InvalidElementCoordinatesError, null, [{
    key: 'code',
    value: function code() {
      return 29;
    }
  }]);

  function InvalidElementCoordinatesError(err) {
    _classCallCheck(this, InvalidElementCoordinatesError);

    _get(Object.getPrototypeOf(InvalidElementCoordinatesError.prototype), 'constructor', this).call(this, err || 'The coordinates provided to an interactions operation are invalid.', InvalidElementCoordinatesError.code());
  }

  return InvalidElementCoordinatesError;
})(MJSONWPError);

var IMENotAvailableError = (function (_MJSONWPError24) {
  _inherits(IMENotAvailableError, _MJSONWPError24);

  _createClass(IMENotAvailableError, null, [{
    key: 'code',
    value: function code() {
      return 30;
    }
  }]);

  function IMENotAvailableError(err) {
    _classCallCheck(this, IMENotAvailableError);

    _get(Object.getPrototypeOf(IMENotAvailableError.prototype), 'constructor', this).call(this, err || 'IME was not available.', IMENotAvailableError.code());
  }

  return IMENotAvailableError;
})(MJSONWPError);

var IMEEngineActivationFailedError = (function (_MJSONWPError25) {
  _inherits(IMEEngineActivationFailedError, _MJSONWPError25);

  _createClass(IMEEngineActivationFailedError, null, [{
    key: 'code',
    value: function code() {
      return 31;
    }
  }]);

  function IMEEngineActivationFailedError(err) {
    _classCallCheck(this, IMEEngineActivationFailedError);

    _get(Object.getPrototypeOf(IMEEngineActivationFailedError.prototype), 'constructor', this).call(this, err || 'An IME engine could not be started.', IMEEngineActivationFailedError.code());
  }

  return IMEEngineActivationFailedError;
})(MJSONWPError);

var InvalidSelectorError = (function (_MJSONWPError26) {
  _inherits(InvalidSelectorError, _MJSONWPError26);

  _createClass(InvalidSelectorError, null, [{
    key: 'code',
    value: function code() {
      return 32;
    }
  }]);

  function InvalidSelectorError(err) {
    _classCallCheck(this, InvalidSelectorError);

    _get(Object.getPrototypeOf(InvalidSelectorError.prototype), 'constructor', this).call(this, err || 'Argument was an invalid selector (e.g. XPath/CSS).', InvalidSelectorError.code());
  }

  return InvalidSelectorError;
})(MJSONWPError);

var SessionNotCreatedError = (function (_MJSONWPError27) {
  _inherits(SessionNotCreatedError, _MJSONWPError27);

  _createClass(SessionNotCreatedError, null, [{
    key: 'code',
    value: function code() {
      return 33;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].INTERNAL_SERVER_ERROR;
    }
  }]);

  function SessionNotCreatedError(details) {
    _classCallCheck(this, SessionNotCreatedError);

    var message = 'A new session could not be created.';
    if (details) {
      message += ' Details: ' + details;
    }

    _get(Object.getPrototypeOf(SessionNotCreatedError.prototype), 'constructor', this).call(this, message, SessionNotCreatedError.code(), SessionNotCreatedError.w3cStatus());
  }

  return SessionNotCreatedError;
})(MJSONWPError);

var MoveTargetOutOfBoundsError = (function (_MJSONWPError28) {
  _inherits(MoveTargetOutOfBoundsError, _MJSONWPError28);

  _createClass(MoveTargetOutOfBoundsError, null, [{
    key: 'code',
    value: function code() {
      return 34;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return 500;
    }
  }]);

  function MoveTargetOutOfBoundsError(err) {
    _classCallCheck(this, MoveTargetOutOfBoundsError);

    _get(Object.getPrototypeOf(MoveTargetOutOfBoundsError.prototype), 'constructor', this).call(this, err || 'Target provided for a move action is out of bounds.', MoveTargetOutOfBoundsError.code(), MoveTargetOutOfBoundsError.w3cStatus());
  }

  return MoveTargetOutOfBoundsError;
})(MJSONWPError);

var NoSuchContextError = (function (_MJSONWPError29) {
  _inherits(NoSuchContextError, _MJSONWPError29);

  _createClass(NoSuchContextError, null, [{
    key: 'code',
    value: function code() {
      return 35;
    }
  }]);

  function NoSuchContextError(err) {
    _classCallCheck(this, NoSuchContextError);

    _get(Object.getPrototypeOf(NoSuchContextError.prototype), 'constructor', this).call(this, err || 'No such context found.', NoSuchContextError.code());
  }

  return NoSuchContextError;
})(MJSONWPError);

var InvalidContextError = (function (_MJSONWPError30) {
  _inherits(InvalidContextError, _MJSONWPError30);

  _createClass(InvalidContextError, null, [{
    key: 'code',
    value: function code() {
      return 36;
    }
  }]);

  function InvalidContextError(err) {
    _classCallCheck(this, InvalidContextError);

    _get(Object.getPrototypeOf(InvalidContextError.prototype), 'constructor', this).call(this, err || 'That command could not be executed in the current context.', InvalidContextError.code());
  }

  return InvalidContextError;
})(MJSONWPError);

var NotYetImplementedError = (function (_MJSONWPError31) {
  _inherits(NotYetImplementedError, _MJSONWPError31);

  _createClass(NotYetImplementedError, null, [{
    key: 'code',
    value: function code() {
      return 13;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].NOT_FOUND; // W3C equivalent is called 'Unknown Command' (A command could not be executed because the remote end is not aware of it)
    }
  }]);

  function NotYetImplementedError(err) {
    _classCallCheck(this, NotYetImplementedError);

    _get(Object.getPrototypeOf(NotYetImplementedError.prototype), 'constructor', this).call(this, err || 'Method has not yet been implemented', NotYetImplementedError.code(), NotYetImplementedError.w3cStatus());
  }

  return NotYetImplementedError;
})(MJSONWPError);

var NotImplementedError = (function (_MJSONWPError32) {
  _inherits(NotImplementedError, _MJSONWPError32);

  _createClass(NotImplementedError, null, [{
    key: 'code',
    value: function code() {
      return 13;
    }
  }, {
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].METHOD_NOT_ALLOWED; // W3C equivalent is 'Unknown Method' (The requested command matched a known URL but did not match an method for that URL)
    }
  }]);

  function NotImplementedError(err) {
    _classCallCheck(this, NotImplementedError);

    _get(Object.getPrototypeOf(NotImplementedError.prototype), 'constructor', this).call(this, err || 'Method is not implemented', NotImplementedError.code());
  }

  return NotImplementedError;
})(MJSONWPError);

var UnableToCaptureScreen = (function (_MJSONWPError33) {
  _inherits(UnableToCaptureScreen, _MJSONWPError33);

  _createClass(UnableToCaptureScreen, null, [{
    key: 'w3cStatus',
    value: function w3cStatus() {
      return _httpStatusCodes2['default'].INTERNAL_SERVER_ERROR;
    }
  }]);

  function UnableToCaptureScreen(err) {
    _classCallCheck(this, UnableToCaptureScreen);

    _get(Object.getPrototypeOf(UnableToCaptureScreen.prototype), 'constructor', this).call(this, err || 'Unable to capture screen', null, UnableToCaptureScreen.w3cStatus());
  }

  return UnableToCaptureScreen;
})(MJSONWPError);

var BadParametersError = (function (_ES6Error2) {
  _inherits(BadParametersError, _ES6Error2);

  function BadParametersError(requiredParams, actualParams, errMessage) {
    _classCallCheck(this, BadParametersError);

    var message = undefined;
    if (!errMessage) {
      message = 'Parameters were incorrect. We wanted ' + (JSON.stringify(requiredParams) + ' and you ') + ('sent ' + JSON.stringify(actualParams));
    } else {
      message = 'Parameters were incorrect. You sent ' + JSON.stringify(actualParams) + ', ' + errMessage;
    }
    _get(Object.getPrototypeOf(BadParametersError.prototype), 'constructor', this).call(this, message);
    this.w3cStatus = _httpStatusCodes2['default'].BAD_REQUEST;
  }

  /**
   * ProxyRequestError is a custom error and will be thrown up on unsuccessful proxy request and
   * will contain information about the proxy failure.
   * In case of ProxyRequestError should fetch the actual error by calling `getActualError()`
   * for proxy failure to generate the client response.
   */
  return BadParametersError;
})(_es6Error2['default']);

var ProxyRequestError = (function (_ES6Error3) {
  _inherits(ProxyRequestError, _ES6Error3);

  function ProxyRequestError(err, jsonwp) {
    _classCallCheck(this, ProxyRequestError);

    var message = 'Proxy request unsuccessful. ' + (_appiumSupport.util.hasValue(jsonwp) ? jsonwp.value : '');
    _get(Object.getPrototypeOf(ProxyRequestError.prototype), 'constructor', this).call(this, err || message);
    this.w3cStatus = _httpStatusCodes2['default'].BAD_REQUEST;
    if (typeof jsonwp === 'string') {
      this.jsonwp = JSON.parse(jsonwp);
    } else {
      this.jsonwp = jsonwp;
    }
  }

  // map of error class name to error class

  _createClass(ProxyRequestError, [{
    key: 'getActualError',
    value: function getActualError() {
      if (_appiumSupport.util.hasValue(this.jsonwp) && _appiumSupport.util.hasValue(this.jsonwp.status) && _appiumSupport.util.hasValue(this.jsonwp.value)) {
        //returns actual error cause for request failure based on `jsonwp.status`
        return errorFromCode(this.jsonwp.status, this.jsonwp.value);
      }
      return new UnknownError(this.message);
    }
  }]);

  return ProxyRequestError;
})(_es6Error2['default']);

var errors = { NotYetImplementedError: NotYetImplementedError,
  NotImplementedError: NotImplementedError,
  BadParametersError: BadParametersError,
  NoSuchDriverError: NoSuchDriverError,
  NoSuchElementError: NoSuchElementError,
  UnknownCommandError: UnknownCommandError,
  StaleElementReferenceError: StaleElementReferenceError,
  ElementNotVisibleError: ElementNotVisibleError,
  InvalidElementStateError: InvalidElementStateError,
  UnknownError: UnknownError,
  InvalidArgumentError: InvalidArgumentError,
  ElementIsNotSelectableError: ElementIsNotSelectableError,
  JavaScriptError: JavaScriptError,
  XPathLookupError: XPathLookupError,
  TimeoutError: TimeoutError,
  NoSuchWindowError: NoSuchWindowError,
  NoSuchCookieError: NoSuchCookieError,
  InvalidCookieDomainError: InvalidCookieDomainError,
  UnableToSetCookieError: UnableToSetCookieError,
  UnexpectedAlertOpenError: UnexpectedAlertOpenError,
  NoAlertOpenError: NoAlertOpenError,
  ScriptTimeoutError: ScriptTimeoutError,
  InvalidElementCoordinatesError: InvalidElementCoordinatesError,
  IMENotAvailableError: IMENotAvailableError,
  IMEEngineActivationFailedError: IMEEngineActivationFailedError,
  InvalidSelectorError: InvalidSelectorError,
  SessionNotCreatedError: SessionNotCreatedError,
  MoveTargetOutOfBoundsError: MoveTargetOutOfBoundsError,
  NoSuchContextError: NoSuchContextError,
  InvalidContextError: InvalidContextError,
  NoSuchFrameError: NoSuchFrameError,
  UnableToCaptureScreen: UnableToCaptureScreen,
  UnknownMethodError: UnknownMethodError,
  UnsupportedOperationError: UnsupportedOperationError,
  ProxyRequestError: ProxyRequestError };

// map of error code to error class
var errorCodeMap = {};
var _iteratorNormalCompletion = true;
var _didIteratorError = false;
var _iteratorError = undefined;

try {
  for (var _iterator = _getIterator(_lodash2['default'].values(errors)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
    var ErrorClass = _step.value;

    if (ErrorClass.code) {
      errorCodeMap[ErrorClass.code()] = ErrorClass;
    }
  }
} catch (err) {
  _didIteratorError = true;
  _iteratorError = err;
} finally {
  try {
    if (!_iteratorNormalCompletion && _iterator['return']) {
      _iterator['return']();
    }
  } finally {
    if (_didIteratorError) {
      throw _iteratorError;
    }
  }
}

function isErrorType(err, type) {
  // `name` property is the constructor name
  if (type.name === MJSONWPError.name) {
    // `jsonwpCode` is `0` on success
    return !!err.jsonwpCode;
  } else if (type.name === ProxyRequestError.name) {
    // `status` is `0` on success
    var hasJsonwpObj = !!err.jsonwp;
    if (hasJsonwpObj) {
      return !!err.jsonwp.status;
    } else {
      return false;
    }
  }
  return err.constructor.name === type.name;
}

// retrieve an error with the code and message
function errorFromCode(code, message) {
  if (code !== 13 && errorCodeMap[code]) {
    return new errorCodeMap[code](message);
  }
  return new UnknownError(message);
}

exports.MJSONWPError = MJSONWPError;
exports.errors = errors;
exports.isErrorType = isErrorType;
exports.errorFromCode = errorFromCode;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9tanNvbndwL2Vycm9ycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7d0JBQXFCLFdBQVc7Ozs7c0JBQ2xCLFFBQVE7Ozs7NkJBQ0QsZ0JBQWdCOzsrQkFDVCxtQkFBbUI7Ozs7OztJQUd6QyxZQUFZO1lBQVosWUFBWTs7QUFDSixXQURSLFlBQVksQ0FDSCxHQUFHLEVBQUUsVUFBVSxFQUFtQjtRQUFqQixTQUFTLHlEQUFHLEdBQUc7OzBCQUR6QyxZQUFZOztBQUVkLCtCQUZFLFlBQVksNkNBRVIsR0FBRyxFQUFFO0FBQ1gsUUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7QUFDN0IsUUFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLElBQUksRUFBRTtBQUM1QixVQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztLQUN0QjtBQUNELFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0dBQzVCOztTQVJHLFlBQVk7OztJQVdaLGlCQUFpQjtZQUFqQixpQkFBaUI7O2VBQWpCLGlCQUFpQjs7V0FDVCxnQkFBRztBQUNiLGFBQU8sQ0FBQyxDQUFDO0tBQ1Y7Ozs7O1dBRWdCLHFCQUFHO0FBQ2xCLGFBQU8sNkJBQWdCLFNBQVMsQ0FBQztLQUNsQzs7O0FBQ1csV0FSUixpQkFBaUIsQ0FRUixHQUFHLEVBQUU7MEJBUmQsaUJBQWlCOztBQVNuQiwrQkFURSxpQkFBaUIsNkNBU2IsR0FBRyxJQUFJLCtDQUErQyxFQUFFLGlCQUFpQixDQUFDLElBQUksRUFBRSxFQUFFLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxFQUFFO0dBQ3hIOztTQVZHLGlCQUFpQjtHQUFTLFlBQVk7O0lBYXRDLGtCQUFrQjtZQUFsQixrQkFBa0I7O2VBQWxCLGtCQUFrQjs7V0FDVixnQkFBRztBQUNiLGFBQU8sQ0FBQyxDQUFDO0tBQ1Y7OztXQUNnQixxQkFBRztBQUNsQixhQUFPLDZCQUFnQixTQUFTLENBQUM7S0FDbEM7OztBQUNXLFdBUFIsa0JB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QUFTLFdBQVcsQ0FBRSxHQUFHLEVBQUUsSUFBSSxFQUFFOztBQUUvQixNQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssWUFBWSxDQUFDLElBQUksRUFBRTs7QUFFbkMsV0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQztHQUN6QixNQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUU7O0FBRS9DLFFBQUksWUFBWSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ2hDLFFBQUksWUFBWSxFQUFFO0FBQ2hCLGFBQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO0tBQzVCLE1BQU07QUFDTCxhQUFPLEtBQUssQ0FBQztLQUNkO0dBQ0Y7QUFDRCxTQUFPLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7Q0FDM0M7OztBQUdELFNBQVMsYUFBYSxDQUFFLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDckMsTUFBSSxJQUFJLEtBQUssRUFBRSxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUNyQyxXQUFPLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0dBQ3hDO0FBQ0QsU0FBTyxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztDQUNsQzs7UUFFUSxZQUFZLEdBQVosWUFBWTtRQUFFLE1BQU0sR0FBTixNQUFNO1FBQUUsV0FBVyxHQUFYLFdBQVc7UUFBRSxhQUFhLEdBQWIsYUFBYSIsImZpbGUiOiJsaWIvbWpzb253cC9lcnJvcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRVM2RXJyb3IgZnJvbSAnZXM2LWVycm9yJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyB1dGlsIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IEhUVFBTdGF0dXNDb2RlcyBmcm9tICdodHRwLXN0YXR1cy1jb2Rlcyc7XG5cbi8vIGJhc2UgZXJyb3IgY2xhc3MgZm9yIGFsbCBvZiBvdXIgZXJyb3JzXG5jbGFzcyBNSlNPTldQRXJyb3IgZXh0ZW5kcyBFUzZFcnJvciB7XG4gIGNvbnN0cnVjdG9yIChtc2csIGpzb253cENvZGUsIHczY1N0YXR1cyA9IDQwMCkge1xuICAgIHN1cGVyKG1zZyk7XG4gICAgdGhpcy5qc29ud3BDb2RlID0ganNvbndwQ29kZTtcbiAgICBpZiAodGhpcy5qc29ud3BDb2RlID09PSBudWxsKSB7XG4gICAgICB0aGlzLmpzb253cENvZGUgPSAxMztcbiAgICB9XG4gICAgdGhpcy53M2NTdGF0dXMgPSB3M2NTdGF0dXM7XG4gIH1cbn1cblxuY2xhc3MgTm9TdWNoRHJpdmVyRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDY7XG4gIH1cbiAgLy8gVzNDIEVycm9yIGlzIGNhbGxlZCBJbnZhbGlkU2Vzc2lvbklEXG4gIHN0YXRpYyB3M2NTdGF0dXMgKCkge1xuICAgIHJldHVybiBIVFRQU3RhdHVzQ29kZXMuTk9UX0ZPVU5EO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0Egc2Vzc2lvbiBpcyBlaXRoZXIgdGVybWluYXRlZCBvciBub3Qgc3RhcnRlZCcsIE5vU3VjaERyaXZlckVycm9yLmNvZGUoKSwgTm9TdWNoRHJpdmVyRXJyb3IudzNjU3RhdHVzKCkpO1xuICB9XG59XG5cbmNsYXNzIE5vU3VjaEVsZW1lbnRFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gNztcbiAgfVxuICBzdGF0aWMgdzNjU3RhdHVzICgpIHtcbiAgICByZXR1cm4gSFRUUFN0YXR1c0NvZGVzLk5PVF9GT1VORDtcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdBbiBlbGVtZW50IGNvdWxkIG5vdCBiZSBsb2NhdGVkIG9uIHRoZSBwYWdlIHVzaW5nIHRoZSBnaXZlbiAnICtcbiAgICAgICAgICAnc2VhcmNoIHBhcmFtZXRlcnMuJywgTm9TdWNoRWxlbWVudEVycm9yLmNvZGUoKSwgTm9TdWNoRWxlbWVudEVycm9yLnczY1N0YXR1cygpKTtcbiAgfVxufVxuXG5jbGFzcyBOb1N1Y2hGcmFtZUVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiA4O1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0EgcmVxdWVzdCB0byBzd2l0Y2ggdG8gYSBmcmFtZSBjb3VsZCBub3QgYmUgc2F0aXNmaWVkIGJlY2F1c2UgJyArXG4gICAgICAgICAgJ3RoZSBmcmFtZSBjb3VsZCBub3QgYmUgZm91bmQuJywgTm9TdWNoRnJhbWVFcnJvci5jb2RlKCkpO1xuICB9XG59XG5cbmNsYXNzIFVua25vd25Db21tYW5kRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDk7XG4gIH1cbiAgc3RhdGljIHczY1N0YXR1cyAoKSB7XG4gICAgcmV0dXJuIEhUVFBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQ7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnVGhlIHJlcXVlc3RlZCByZXNvdXJjZSBjb3VsZCBub3QgYmUgZm91bmQsIG9yIGEgcmVxdWVzdCB3YXMgJyArXG4gICAgICAgICAgJ3JlY2VpdmVkIHVzaW5nIGFuIEhUVFAgbWV0aG9kIHRoYXQgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgbWFwcGVkICcgK1xuICAgICAgICAgICdyZXNvdXJjZS4nLCBVbmtub3duQ29tbWFuZEVycm9yLmNvZGUoKSwgVW5rbm93bkNvbW1hbmRFcnJvci53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuY2xhc3MgU3RhbGVFbGVtZW50UmVmZXJlbmNlRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDEwO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0FuIGVsZW1lbnQgY29tbWFuZCBmYWlsZWQgYmVjYXVzZSB0aGUgcmVmZXJlbmNlZCBlbGVtZW50IGlzIG5vICcgK1xuICAgICAgICAgICdsb25nZXIgYXR0YWNoZWQgdG8gdGhlIERPTS4nLCBTdGFsZUVsZW1lbnRSZWZlcmVuY2VFcnJvci5jb2RlKCkpO1xuICB9XG59XG5cbmNsYXNzIEVsZW1lbnROb3RWaXNpYmxlRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDExO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0FuIGVsZW1lbnQgY29tbWFuZCBjb3VsZCBub3QgYmUgY29tcGxldGVkIGJlY2F1c2UgdGhlIGVsZW1lbnQgaXMgJyArXG4gICAgICAgICAgJ25vdCB2aXNpYmxlIG9uIHRoZSBwYWdlLicsIEVsZW1lbnROb3RWaXNpYmxlRXJyb3IuY29kZSgpKTtcbiAgfVxufVxuXG5jbGFzcyBJbnZhbGlkRWxlbWVudFN0YXRlRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDEyO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0FuIGVsZW1lbnQgY29tbWFuZCBjb3VsZCBub3QgYmUgY29tcGxldGVkIGJlY2F1c2UgdGhlIGVsZW1lbnQgaXMgJyArXG4gICAgICAgICAgJ2luIGFuIGludmFsaWQgc3RhdGUgKGUuZy4gYXR0ZW1wdGluZyB0byBjbGljayBhIGRpc2FibGVkIGVsZW1lbnQpLicsXG4gICAgICAgICAgSW52YWxpZEVsZW1lbnRTdGF0ZUVycm9yLmNvZGUoKSk7XG4gIH1cbn1cblxuY2xhc3MgVW5rbm93bkVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAxMztcbiAgfVxuICBzdGF0aWMgdzNjU3RhdHVzICgpIHtcbiAgICByZXR1cm4gSFRUUFN0YXR1c0NvZGVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUjtcbiAgfVxuICBjb25zdHJ1Y3RvciAob3JpZ2luYWxFcnJvcikge1xuICAgIGxldCBvcmlnTWVzc2FnZSA9IG9yaWdpbmFsRXJyb3I7XG4gICAgaWYgKG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgb3JpZ01lc3NhZ2UgPSBvcmlnaW5hbEVycm9yLm1lc3NhZ2U7XG4gICAgfVxuICAgIGxldCBtZXNzYWdlID0gJ0FuIHVua25vd24gc2VydmVyLXNpZGUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyAnICtcbiAgICAgICAgICAgICAgICAgICd0aGUgY29tbWFuZC4nO1xuICAgIGlmIChvcmlnaW5hbEVycm9yKSB7XG4gICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gT3JpZ2luYWwgZXJyb3I6ICR7b3JpZ01lc3NhZ2V9YDtcbiAgICB9XG5cbiAgICBzdXBlcihtZXNzYWdlLCBVbmtub3duRXJyb3IuY29kZSgpLCBVbmtub3duRXJyb3IudzNjU3RhdHVzKCkpO1xuICB9XG59XG5cbmNsYXNzIFVua25vd25NZXRob2RFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyB3M2NTdGF0dXMgKCkge1xuICAgIHJldHVybiBIVFRQU3RhdHVzQ29kZXMuTUVUSE9EX05PVF9BTExPV0VEO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ1Vua25vd24gbWV0aG9kLicsIG51bGwsIFVua25vd25NZXRob2RFcnJvci53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuY2xhc3MgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyB3M2NTdGF0dXMgKCkge1xuICAgIHJldHVybiBIVFRQU3RhdHVzQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0Egc2VydmVyLXNpZGUgZXJyb3Igb2NjdXJyZWQuIENvbW1hbmQgY2Fubm90IGJlIHN1cHBvcnRlZC4nLCBudWxsLCBVbnN1cHBvcnRlZE9wZXJhdGlvbkVycm9yLnczY1N0YXR1cygpKTtcbiAgfVxufVxuXG5jbGFzcyBFbGVtZW50SXNOb3RTZWxlY3RhYmxlRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDE1O1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0FuIGF0dGVtcHQgd2FzIG1hZGUgdG8gc2VsZWN0IGFuIGVsZW1lbnQgdGhhdCBjYW5ub3QgYmUgc2VsZWN0ZWQuJyxcbiAgICAgICAgICBFbGVtZW50SXNOb3RTZWxlY3RhYmxlRXJyb3IuY29kZSgpKTtcbiAgfVxufVxuXG5jbGFzcyBKYXZhU2NyaXB0RXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDE3O1xuICB9XG4gIHN0YXRpYyB3M2NTdGF0dXMgKCkge1xuICAgIHJldHVybiA1MDA7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZXhlY3V0aW5nIHVzZXIgc3VwcGxpZWQgSmF2YVNjcmlwdC4nLFxuICAgICAgICAgIEphdmFTY3JpcHRFcnJvci5jb2RlKCksIEphdmFTY3JpcHRFcnJvci53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuY2xhc3MgWFBhdGhMb29rdXBFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gMTk7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2VhcmNoaW5nIGZvciBhbiBlbGVtZW50IGJ5IFhQYXRoLicsXG4gICAgICAgICAgWFBhdGhMb29rdXBFcnJvci5jb2RlKCkpO1xuICB9XG59XG5cbmNsYXNzIFRpbWVvdXRFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gMjE7XG4gIH1cbiAgc3RhdGljIHczY1N0YXR1cyAoKSB7XG4gICAgcmV0dXJuIEhUVFBTdGF0dXNDb2Rlcy5SRVFVRVNUX1RJTUVPVVQ7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnQW4gb3BlcmF0aW9uIGRpZCBub3QgY29tcGxldGUgYmVmb3JlIGl0cyB0aW1lb3V0IGV4cGlyZWQuJyxcbiAgICAgICAgICBUaW1lb3V0RXJyb3IuY29kZSgpLCBUaW1lb3V0RXJyb3IudzNjU3RhdHVzKCkpO1xuICB9XG59XG5cbmNsYXNzIE5vU3VjaFdpbmRvd0Vycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAyMztcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdBIHJlcXVlc3QgdG8gc3dpdGNoIHRvIGEgZGlmZmVyZW50IHdpbmRvdyBjb3VsZCBub3QgYmUgc2F0aXNmaWVkICcgK1xuICAgICAgICAgICdiZWNhdXNlIHRoZSB3aW5kb3cgY291bGQgbm90IGJlIGZvdW5kLicsIE5vU3VjaFdpbmRvd0Vycm9yLmNvZGUoKSk7XG4gIH1cbn1cblxuY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgY29tbWFuZCBhcmUgZWl0aGVyIGludmFsaWQgb3IgbWFsZm9ybWVkJyk7XG4gIH1cbn1cblxuY2xhc3MgSW52YWxpZENvb2tpZURvbWFpbkVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAyNDtcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdBbiBpbGxlZ2FsIGF0dGVtcHQgd2FzIG1hZGUgdG8gc2V0IGEgY29va2llIHVuZGVyIGEgZGlmZmVyZW50ICcgK1xuICAgICAgICAgICdkb21haW4gdGhhbiB0aGUgY3VycmVudCBwYWdlLicsIEludmFsaWRDb29raWVEb21haW5FcnJvci5jb2RlKCkpO1xuICB9XG59XG5cbmNsYXNzIE5vU3VjaENvb2tpZUVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIHczY1N0YXR1cyAoKSB7XG4gICAgcmV0dXJuIEhUVFBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQ7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnQ291bGQgbm90IGZpbmQgY29va2llJywgbnVsbCwgTm9TdWNoQ29va2llRXJyb3IudzNjU3RhdHVzKCkpO1xuICB9XG59XG5cbmNsYXNzIFVuYWJsZVRvU2V0Q29va2llRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDI1O1xuICB9XG4gIHN0YXRpYyB3M2NTdGF0dXMgKCkge1xuICAgIHJldHVybiBIVFRQU3RhdHVzQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0EgcmVxdWVzdCB0byBzZXQgYSBjb29raWVcXCdzIHZhbHVlIGNvdWxkIG5vdCBiZSBzYXRpc2ZpZWQuJyxcbiAgICAgICAgICBVbmFibGVUb1NldENvb2tpZUVycm9yLmNvZGUoKSwgVW5hYmxlVG9TZXRDb29raWVFcnJvci53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuY2xhc3MgVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAyNjtcbiAgfVxuICBzdGF0aWMgdzNjU3RhdHVzICgpIHtcbiAgICByZXR1cm4gSFRUUFN0YXR1c0NvZGVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUjtcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdBIG1vZGFsIGRpYWxvZyB3YXMgb3BlbiwgYmxvY2tpbmcgdGhpcyBvcGVyYXRpb24nLFxuICAgICAgICAgIFVuZXhwZWN0ZWRBbGVydE9wZW5FcnJvci5jb2RlKCksIFVuZXhwZWN0ZWRBbGVydE9wZW5FcnJvci53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuY2xhc3MgTm9BbGVydE9wZW5FcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gMjc7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnQW4gYXR0ZW1wdCB3YXMgbWFkZSB0byBvcGVyYXRlIG9uIGEgbW9kYWwgZGlhbG9nIHdoZW4gb25lICcgK1xuICAgICAgICAgICd3YXMgbm90IG9wZW4uJywgTm9BbGVydE9wZW5FcnJvci5jb2RlKCkpO1xuICB9XG59XG5cbmNsYXNzIFNjcmlwdFRpbWVvdXRFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gMjg7XG4gIH1cbiAgc3RhdGljIHczY1N0YXR1cyAoKSB7XG4gICAgcmV0dXJuIEhUVFBTdGF0dXNDb2Rlcy5SRVFVRVNUX1RJTUVPVVQ7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnQSBzY3JpcHQgZGlkIG5vdCBjb21wbGV0ZSBiZWZvcmUgaXRzIHRpbWVvdXQgZXhwaXJlZC4nLFxuICAgICAgICAgIFNjcmlwdFRpbWVvdXRFcnJvci5jb2RlKCksIFNjcmlwdFRpbWVvdXRFcnJvci53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuY2xhc3MgSW52YWxpZEVsZW1lbnRDb29yZGluYXRlc0Vycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAyOTtcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdUaGUgY29vcmRpbmF0ZXMgcHJvdmlkZWQgdG8gYW4gaW50ZXJhY3Rpb25zIG9wZXJhdGlvbiBhcmUgaW52YWxpZC4nLFxuICAgICAgICAgIEludmFsaWRFbGVtZW50Q29vcmRpbmF0ZXNFcnJvci5jb2RlKCkpO1xuICB9XG59XG5cbmNsYXNzIElNRU5vdEF2YWlsYWJsZUVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAzMDtcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdJTUUgd2FzIG5vdCBhdmFpbGFibGUuJywgSU1FTm90QXZhaWxhYmxlRXJyb3IuY29kZSgpKTtcbiAgfVxufVxuXG5jbGFzcyBJTUVFbmdpbmVBY3RpdmF0aW9uRmFpbGVkRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDMxO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ0FuIElNRSBlbmdpbmUgY291bGQgbm90IGJlIHN0YXJ0ZWQuJyxcbiAgICAgICAgICBJTUVFbmdpbmVBY3RpdmF0aW9uRmFpbGVkRXJyb3IuY29kZSgpKTtcbiAgfVxufVxuXG5jbGFzcyBJbnZhbGlkU2VsZWN0b3JFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gMzI7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnQXJndW1lbnQgd2FzIGFuIGludmFsaWQgc2VsZWN0b3IgKGUuZy4gWFBhdGgvQ1NTKS4nLFxuICAgICAgICAgIEludmFsaWRTZWxlY3RvckVycm9yLmNvZGUoKSk7XG4gIH1cbn1cblxuY2xhc3MgU2Vzc2lvbk5vdENyZWF0ZWRFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gMzM7XG4gIH1cbiAgc3RhdGljIHczY1N0YXR1cyAoKSB7XG4gICAgcmV0dXJuIEhUVFBTdGF0dXNDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1I7XG4gIH1cbiAgY29uc3RydWN0b3IgKGRldGFpbHMpIHtcbiAgICBsZXQgbWVzc2FnZSA9ICdBIG5ldyBzZXNzaW9uIGNvdWxkIG5vdCBiZSBjcmVhdGVkLic7XG4gICAgaWYgKGRldGFpbHMpIHtcbiAgICAgIG1lc3NhZ2UgKz0gYCBEZXRhaWxzOiAke2RldGFpbHN9YDtcbiAgICB9XG5cbiAgICBzdXBlcihtZXNzYWdlLCBTZXNzaW9uTm90Q3JlYXRlZEVycm9yLmNvZGUoKSwgU2Vzc2lvbk5vdENyZWF0ZWRFcnJvci53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuY2xhc3MgTW92ZVRhcmdldE91dE9mQm91bmRzRXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDM0O1xuICB9XG4gIHN0YXRpYyB3M2NTdGF0dXMgKCkge1xuICAgIHJldHVybiA1MDA7XG4gIH1cbiAgY29uc3RydWN0b3IgKGVycikge1xuICAgIHN1cGVyKGVyciB8fCAnVGFyZ2V0IHByb3ZpZGVkIGZvciBhIG1vdmUgYWN0aW9uIGlzIG91dCBvZiBib3VuZHMuJyxcbiAgICAgICAgICBNb3ZlVGFyZ2V0T3V0T2ZCb3VuZHNFcnJvci5jb2RlKCksIE1vdmVUYXJnZXRPdXRPZkJvdW5kc0Vycm9yLnczY1N0YXR1cygpKTtcbiAgfVxufVxuXG5jbGFzcyBOb1N1Y2hDb250ZXh0RXJyb3IgZXh0ZW5kcyBNSlNPTldQRXJyb3Ige1xuICBzdGF0aWMgY29kZSAoKSB7XG4gICAgcmV0dXJuIDM1O1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ05vIHN1Y2ggY29udGV4dCBmb3VuZC4nLCBOb1N1Y2hDb250ZXh0RXJyb3IuY29kZSgpKTtcbiAgfVxufVxuXG5jbGFzcyBJbnZhbGlkQ29udGV4dEVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAzNjtcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdUaGF0IGNvbW1hbmQgY291bGQgbm90IGJlIGV4ZWN1dGVkIGluIHRoZSBjdXJyZW50IGNvbnRleHQuJyxcbiAgICAgICAgICBJbnZhbGlkQ29udGV4dEVycm9yLmNvZGUoKSk7XG4gIH1cbn1cblxuY2xhc3MgTm90WWV0SW1wbGVtZW50ZWRFcnJvciBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyBjb2RlICgpIHtcbiAgICByZXR1cm4gMTM7XG4gIH1cbiAgc3RhdGljIHczY1N0YXR1cyAoKSB7XG4gICAgcmV0dXJuIEhUVFBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQ7IC8vIFczQyBlcXVpdmFsZW50IGlzIGNhbGxlZCAnVW5rbm93biBDb21tYW5kJyAoQSBjb21tYW5kIGNvdWxkIG5vdCBiZSBleGVjdXRlZCBiZWNhdXNlIHRoZSByZW1vdGUgZW5kIGlzIG5vdCBhd2FyZSBvZiBpdClcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdNZXRob2QgaGFzIG5vdCB5ZXQgYmVlbiBpbXBsZW1lbnRlZCcsIE5vdFlldEltcGxlbWVudGVkRXJyb3IuY29kZSgpLCBOb3RZZXRJbXBsZW1lbnRlZEVycm9yLnczY1N0YXR1cygpKTtcbiAgfVxufVxuXG5jbGFzcyBOb3RJbXBsZW1lbnRlZEVycm9yIGV4dGVuZHMgTUpTT05XUEVycm9yIHtcbiAgc3RhdGljIGNvZGUgKCkge1xuICAgIHJldHVybiAxMztcbiAgfVxuICBzdGF0aWMgdzNjU3RhdHVzICgpIHtcbiAgICByZXR1cm4gSFRUUFN0YXR1c0NvZGVzLk1FVEhPRF9OT1RfQUxMT1dFRDsgLy8gVzNDIGVxdWl2YWxlbnQgaXMgJ1Vua25vd24gTWV0aG9kJyAoVGhlIHJlcXVlc3RlZCBjb21tYW5kIG1hdGNoZWQgYSBrbm93biBVUkwgYnV0IGRpZCBub3QgbWF0Y2ggYW4gbWV0aG9kIGZvciB0aGF0IFVSTClcbiAgfVxuICBjb25zdHJ1Y3RvciAoZXJyKSB7XG4gICAgc3VwZXIoZXJyIHx8ICdNZXRob2QgaXMgbm90IGltcGxlbWVudGVkJywgTm90SW1wbGVtZW50ZWRFcnJvci5jb2RlKCkpO1xuICB9XG59XG5cbmNsYXNzIFVuYWJsZVRvQ2FwdHVyZVNjcmVlbiBleHRlbmRzIE1KU09OV1BFcnJvciB7XG4gIHN0YXRpYyB3M2NTdGF0dXMgKCkge1xuICAgIHJldHVybiBIVFRQU3RhdHVzQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SO1xuICB9XG4gIGNvbnN0cnVjdG9yIChlcnIpIHtcbiAgICBzdXBlcihlcnIgfHwgJ1VuYWJsZSB0byBjYXB0dXJlIHNjcmVlbicsIG51bGwsIFVuYWJsZVRvQ2FwdHVyZVNjcmVlbi53M2NTdGF0dXMoKSk7XG4gIH1cbn1cblxuXG5cbmNsYXNzIEJhZFBhcmFtZXRlcnNFcnJvciBleHRlbmRzIEVTNkVycm9yIHtcbiAgY29uc3RydWN0b3IgKHJlcXVpcmVkUGFyYW1zLCBhY3R1YWxQYXJhbXMsIGVyck1lc3NhZ2UpIHtcbiAgICBsZXQgbWVzc2FnZTtcbiAgICBpZiAoIWVyck1lc3NhZ2UpIHtcbiAgICAgIG1lc3NhZ2UgPSBgUGFyYW1ldGVycyB3ZXJlIGluY29ycmVjdC4gV2Ugd2FudGVkIGAgK1xuICAgICAgICAgIGAke0pTT04uc3RyaW5naWZ5KHJlcXVpcmVkUGFyYW1zKX0gYW5kIHlvdSBgICtcbiAgICAgICAgICBgc2VudCAke0pTT04uc3RyaW5naWZ5KGFjdHVhbFBhcmFtcyl9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSA9IGBQYXJhbWV0ZXJzIHdlcmUgaW5jb3JyZWN0LiBZb3Ugc2VudCAke0pTT04uc3RyaW5naWZ5KGFjdHVhbFBhcmFtcyl9LCAke2Vyck1lc3NhZ2V9YDtcbiAgICB9XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy53M2NTdGF0dXMgPSBIVFRQU3RhdHVzQ29kZXMuQkFEX1JFUVVFU1Q7XG4gIH1cbn1cblxuLyoqXG4gKiBQcm94eVJlcXVlc3RFcnJvciBpcyBhIGN1c3RvbSBlcnJvciBhbmQgd2lsbCBiZSB0aHJvd24gdXAgb24gdW5zdWNjZXNzZnVsIHByb3h5IHJlcXVlc3QgYW5kXG4gKiB3aWxsIGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHByb3h5IGZhaWx1cmUuXG4gKiBJbiBjYXNlIG9mIFByb3h5UmVxdWVzdEVycm9yIHNob3VsZCBmZXRjaCB0aGUgYWN0dWFsIGVycm9yIGJ5IGNhbGxpbmcgYGdldEFjdHVhbEVycm9yKClgXG4gKiBmb3IgcHJveHkgZmFpbHVyZSB0byBnZW5lcmF0ZSB0aGUgY2xpZW50IHJlc3BvbnNlLlxuICovXG5jbGFzcyBQcm94eVJlcXVlc3RFcnJvciBleHRlbmRzIEVTNkVycm9yIHtcbiAgY29uc3RydWN0b3IgKGVyciwganNvbndwKSB7XG4gICAgbGV0IG1lc3NhZ2UgPSBgUHJveHkgcmVxdWVzdCB1bnN1Y2Nlc3NmdWwuICR7dXRpbC5oYXNWYWx1ZShqc29ud3ApID8ganNvbndwLnZhbHVlIDogJyd9YDtcbiAgICBzdXBlcihlcnIgfHwgbWVzc2FnZSk7XG4gICAgdGhpcy53M2NTdGF0dXMgPSBIVFRQU3RhdHVzQ29kZXMuQkFEX1JFUVVFU1Q7XG4gICAgaWYgKHR5cGVvZiBqc29ud3AgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmpzb253cCA9IEpTT04ucGFyc2UoanNvbndwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5qc29ud3AgPSBqc29ud3A7XG4gICAgfVxuICB9XG5cbiAgZ2V0QWN0dWFsRXJyb3IgKCkge1xuICAgIGlmICh1dGlsLmhhc1ZhbHVlKHRoaXMuanNvbndwKSAmJiB1dGlsLmhhc1ZhbHVlKHRoaXMuanNvbndwLnN0YXR1cykgJiYgdXRpbC5oYXNWYWx1ZSh0aGlzLmpzb253cC52YWx1ZSkpIHtcbiAgICAgIC8vcmV0dXJucyBhY3R1YWwgZXJyb3IgY2F1c2UgZm9yIHJlcXVlc3QgZmFpbHVyZSBiYXNlZCBvbiBganNvbndwLnN0YXR1c2BcbiAgICAgIHJldHVybiBlcnJvckZyb21Db2RlKHRoaXMuanNvbndwLnN0YXR1cywgdGhpcy5qc29ud3AudmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFVua25vd25FcnJvcih0aGlzLm1lc3NhZ2UpO1xuICB9XG59XG4vLyBtYXAgb2YgZXJyb3IgY2xhc3MgbmFtZSB0byBlcnJvciBjbGFzc1xuY29uc3QgZXJyb3JzID0ge05vdFlldEltcGxlbWVudGVkRXJyb3IsXG4gICAgICAgICAgICAgICAgTm90SW1wbGVtZW50ZWRFcnJvcixcbiAgICAgICAgICAgICAgICBCYWRQYXJhbWV0ZXJzRXJyb3IsXG4gICAgICAgICAgICAgICAgTm9TdWNoRHJpdmVyRXJyb3IsXG4gICAgICAgICAgICAgICAgTm9TdWNoRWxlbWVudEVycm9yLFxuICAgICAgICAgICAgICAgIFVua25vd25Db21tYW5kRXJyb3IsXG4gICAgICAgICAgICAgICAgU3RhbGVFbGVtZW50UmVmZXJlbmNlRXJyb3IsXG4gICAgICAgICAgICAgICAgRWxlbWVudE5vdFZpc2libGVFcnJvcixcbiAgICAgICAgICAgICAgICBJbnZhbGlkRWxlbWVudFN0YXRlRXJyb3IsXG4gICAgICAgICAgICAgICAgVW5rbm93bkVycm9yLFxuICAgICAgICAgICAgICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgICAgICAgICAgICAgIEVsZW1lbnRJc05vdFNlbGVjdGFibGVFcnJvcixcbiAgICAgICAgICAgICAgICBKYXZhU2NyaXB0RXJyb3IsXG4gICAgICAgICAgICAgICAgWFBhdGhMb29rdXBFcnJvcixcbiAgICAgICAgICAgICAgICBUaW1lb3V0RXJyb3IsXG4gICAgICAgICAgICAgICAgTm9TdWNoV2luZG93RXJyb3IsXG4gICAgICAgICAgICAgICAgTm9TdWNoQ29va2llRXJyb3IsXG4gICAgICAgICAgICAgICAgSW52YWxpZENvb2tpZURvbWFpbkVycm9yLFxuICAgICAgICAgICAgICAgIFVuYWJsZVRvU2V0Q29va2llRXJyb3IsXG4gICAgICAgICAgICAgICAgVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yLFxuICAgICAgICAgICAgICAgIE5vQWxlcnRPcGVuRXJyb3IsXG4gICAgICAgICAgICAgICAgU2NyaXB0VGltZW91dEVycm9yLFxuICAgICAgICAgICAgICAgIEludmFsaWRFbGVtZW50Q29vcmRpbmF0ZXNFcnJvcixcbiAgICAgICAgICAgICAgICBJTUVOb3RBdmFpbGFibGVFcnJvcixcbiAgICAgICAgICAgICAgICBJTUVFbmdpbmVBY3RpdmF0aW9uRmFpbGVkRXJyb3IsXG4gICAgICAgICAgICAgICAgSW52YWxpZFNlbGVjdG9yRXJyb3IsXG4gICAgICAgICAgICAgICAgU2Vzc2lvbk5vdENyZWF0ZWRFcnJvcixcbiAgICAgICAgICAgICAgICBNb3ZlVGFyZ2V0T3V0T2ZCb3VuZHNFcnJvcixcbiAgICAgICAgICAgICAgICBOb1N1Y2hDb250ZXh0RXJyb3IsXG4gICAgICAgICAgICAgICAgSW52YWxpZENvbnRleHRFcnJvcixcbiAgICAgICAgICAgICAgICBOb1N1Y2hGcmFtZUVycm9yLFxuICAgICAgICAgICAgICAgIFVuYWJsZVRvQ2FwdHVyZVNjcmVlbixcbiAgICAgICAgICAgICAgICBVbmtub3duTWV0aG9kRXJyb3IsXG4gICAgICAgICAgICAgICAgVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcixcbiAgICAgICAgICAgICAgICBQcm94eVJlcXVlc3RFcnJvcn07XG5cbi8vIG1hcCBvZiBlcnJvciBjb2RlIHRvIGVycm9yIGNsYXNzXG5jb25zdCBlcnJvckNvZGVNYXAgPSB7fTtcbmZvciAobGV0IEVycm9yQ2xhc3Mgb2YgXy52YWx1ZXMoZXJyb3JzKSkge1xuICBpZiAoRXJyb3JDbGFzcy5jb2RlKSB7XG4gICAgZXJyb3JDb2RlTWFwW0Vycm9yQ2xhc3MuY29kZSgpXSA9IEVycm9yQ2xhc3M7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNFcnJvclR5cGUgKGVyciwgdHlwZSkge1xuICAvLyBgbmFtZWAgcHJvcGVydHkgaXMgdGhlIGNvbnN0cnVjdG9yIG5hbWVcbiAgaWYgKHR5cGUubmFtZSA9PT0gTUpTT05XUEVycm9yLm5hbWUpIHtcbiAgICAvLyBganNvbndwQ29kZWAgaXMgYDBgIG9uIHN1Y2Nlc3NcbiAgICByZXR1cm4gISFlcnIuanNvbndwQ29kZTtcbiAgfSBlbHNlIGlmICh0eXBlLm5hbWUgPT09IFByb3h5UmVxdWVzdEVycm9yLm5hbWUpIHtcbiAgICAvLyBgc3RhdHVzYCBpcyBgMGAgb24gc3VjY2Vzc1xuICAgIGxldCBoYXNKc29ud3BPYmogPSAhIWVyci5qc29ud3A7XG4gICAgaWYgKGhhc0pzb253cE9iaikge1xuICAgICAgcmV0dXJuICEhZXJyLmpzb253cC5zdGF0dXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVyci5jb25zdHJ1Y3Rvci5uYW1lID09PSB0eXBlLm5hbWU7XG59XG5cbi8vIHJldHJpZXZlIGFuIGVycm9yIHdpdGggdGhlIGNvZGUgYW5kIG1lc3NhZ2VcbmZ1bmN0aW9uIGVycm9yRnJvbUNvZGUgKGNvZGUsIG1lc3NhZ2UpIHtcbiAgaWYgKGNvZGUgIT09IDEzICYmIGVycm9yQ29kZU1hcFtjb2RlXSkge1xuICAgIHJldHVybiBuZXcgZXJyb3JDb2RlTWFwW2NvZGVdKG1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBuZXcgVW5rbm93bkVycm9yKG1lc3NhZ2UpO1xufVxuXG5leHBvcnQgeyBNSlNPTldQRXJyb3IsIGVycm9ycywgaXNFcnJvclR5cGUsIGVycm9yRnJvbUNvZGUgfTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
